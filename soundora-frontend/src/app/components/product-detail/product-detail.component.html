<!-- ========================================= -->
<!-- PAGE DE D√âTAILS DU PRODUIT -->
<!-- ========================================= -->

<div class="product-detail-container">
  
  <!-- BOUTON RETOUR -->
  <button class="back-button" (click)="goBack()">
    ‚Üê Retour aux produits
  </button>

  <!-- LOADER : Affichage pendant le chargement -->
  <div *ngIf="loading" class="loading">
    <p>Chargement du produit...</p>
  </div>

  <!-- MESSAGE D'ERREUR -->
  <div *ngIf="error && !loading" class="error">
    <p>{{ error }}</p>
    <button (click)="goBack()">Retour aux produits</button>
  </div>

  <!-- CONTENU DU PRODUIT -->
  <div *ngIf="product && !loading" class="product-content">
    
    <!-- ================================================= -->
    <!-- SECTION GAUCHE : Image du produit -->
    <!-- ================================================= -->
    <!-- 
      EXPLICATION POUR UN √âTUDIANT :
      On utilise la m√©thode getProductImage() d√©finie dans le fichier .ts
      Cette m√©thode est intelligente : elle cherche d'abord une image locale
      dans notre dossier assets/, et si elle n'en trouve pas, elle utilise
      l'URL de la base de donn√©es (ou un placeholder par d√©faut).
      
      [src] = "binding" Angular : la valeur entre guillemets est du TypeScript
      getProductImage() retourne un chemin comme "assets/images/products/tama-imperialstar.jpg"
    -->
    <div class="product-image">
      <img 
        [src]="getProductImage()"
        [alt]="product.name"
        class="main-image"
      />
    </div>

    <!-- SECTION DROITE : Informations -->
    <div class="product-info">
      
      <!-- Nom du produit -->
      <h1>{{ product.name }}</h1>
      
      <!-- Marque -->
      <p class="brand">{{ product.brand_name }}</p>
      
      <!-- Prix -->
      <p class="price">{{ product.price }} ‚Ç¨</p>
      
      <!-- Description -->
      <div class="description">
        <h2>Description</h2>
        <p>{{ product.description || 'Aucune description disponible' }}</p>
      </div>
      
      <!-- Informations suppl√©mentaires -->
      <div class="additional-info">
        <h2>Informations</h2>
        <ul>
          <li *ngIf="product.category_name">
            <strong>Cat√©gorie :</strong> {{ product.category_name }}
          </li>
          <li *ngIf="product.stock_quantity">
            <strong>Stock :</strong> {{ product.stock_quantity }} disponible(s)
          </li>
        </ul>
      </div>
      
      <!-- BOUTON AJOUTER AU PANIER -->
      <button 
        class="add-to-cart-btn" 
        (click)="addToCart()"
        [disabled]="addingToCart"
      >
        <span *ngIf="!addingToCart">üõí Ajouter au panier</span>
        <span *ngIf="addingToCart">Ajout en cours...</span>
      </button>

      <!-- MESSAGE DE CONFIRMATION -->
      <!-- 
        *ngIf="cartMessage" : s'affiche seulement si cartMessage n'est pas vide
        Le message dispara√Æt automatiquement apr√®s 3 secondes (voir le .ts)
      -->
      <div *ngIf="cartMessage" class="cart-message">
        {{ cartMessage }}
        <a routerLink="/cart" class="view-cart-link">Voir le panier ‚Üí</a>
      </div>
      
    </div>
  </div>
</div>
