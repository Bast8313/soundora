<!-- 
  =====================================
  NAVBAR PRINCIPALE (style Thomann)
  =====================================
  
  STRUCTURE :
  [Logo] [Guitares] [Basses] [Effets] ... [Recherche] [Panier] [Compte]
  
  DIFFÃ‰RENCE AVEC L'ANCIENNE VERSION :
  - Avant : Menu dÃ©roulant pour les catÃ©gories
  - Maintenant : CatÃ©gories affichÃ©es directement comme liens
-->

<nav class="navbar">
  <div class="navbar-container">
    
    <!-- 
      ===================
      LOGO SOUNDORA
      ===================
      Cliquable, ramÃ¨ne Ã  l'accueil
    -->
    <a routerLink="/" class="navbar-logo">
      <span class="logo-icon">ðŸŽ¸</span>
      <span class="logo-text">Soundora</span>
    </a>

    <!-- 
      ===================
      MENU DE CATÃ‰GORIES
      ===================
      Affiche directement les catÃ©gories principales
      Style horizontal sur desktop, vertical sur mobile
    -->
    <ul class="navbar-menu" [class.active]="isMenuOpen">
      
      <!-- 
        CATÃ‰GORIES PRINCIPALES
        *ngFor : Boucle sur toutes les catÃ©gories
        Affiche directement les catÃ©gories sans "Accueil" ni "Toutes les catÃ©gories"
      -->
      <li class="navbar-item" *ngFor="let category of categories">
        <!-- 
          [routerLink]="['/products']" : Va Ã  la page produits
          [queryParams]="{category: category.slug}" : Ajoute ?category=guitares dans l'URL
          RÃ©sultat : /products?category=guitares
        -->
        <a [routerLink]="['/products']" 
           [queryParams]="{category: category.slug}" 
           class="navbar-link category-link" 
           (click)="closeMenu()">
          {{ category.name }}
        </a>
      </li>

    </ul>

    <!-- 
      ===================
      ACTIONS UTILISATEUR
      ===================
      Panier et authentification
      
      NOUVEAUTÃ‰ : Affichage conditionnel selon l'Ã©tat de connexion
      - *ngIf="!isLoggedIn()" : Affiche si NON connectÃ©
      - *ngIf="isLoggedIn()" : Affiche si CONNECTÃ‰
    -->
    <div class="navbar-actions">
      <!-- Panier avec badge compteur -->
      <a routerLink="/cart" class="navbar-icon-link" title="Panier">
        <span class="icon">ðŸ›’</span>
        <span class="badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
      </a>

      <!-- 
        ============================================
        SI UTILISATEUR NON CONNECTÃ‰
        ============================================
        Affiche les boutons Connexion et Inscription
      -->
      <div class="navbar-auth" *ngIf="!isLoggedIn()">
        <a routerLink="/login" class="btn-login">Connexion</a>
        <a routerLink="/register" class="btn-register">Inscription</a>
      </div>
      
      <!-- 
        ============================================
        SI UTILISATEUR CONNECTÃ‰
        ============================================
        Affiche :
        - Message de bienvenue avec prÃ©nom (ou email si pas de prÃ©nom)
        - Bouton DÃ©connexion
        
        EXPLICATIONS :
        - currentUser?.first_name : Le ? signifie "seulement si currentUser existe"
        - || currentUser.email : Si pas de prÃ©nom, affiche l'email
      -->
      <div class="navbar-auth" *ngIf="isLoggedIn()">
        <span class="welcome-message">
          Bonjour {{ currentUser?.first_name || currentUser?.email }} ðŸ‘‹
        </span>
        <button (click)="logout()" class="btn-logout" title="Se dÃ©connecter">
          DÃ©connexion
        </button>
      </div>
    </div>

    <!-- Bouton burger pour mobile -->
    <button class="burger-menu" (click)="toggleMenu()" [class.active]="isMenuOpen">
      <span class="burger-line"></span>
      <span class="burger-line"></span>
      <span class="burger-line"></span>
    </button>

  </div>
</nav>
